<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Floor List</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <style>
        table, th, td {
            border-collapse: collapse;
            border: 0px solid black;
        }
        table {
            width: 100%;
        }
        th, td {
            width: 30%;
            border-bottom: 1px solid #dddddd;
        }
        th {
            padding: 15px;
        }
    </style>
</head>
<body>
    <h2><center>Floor</center></h2>
    <table>
        <tr>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Room Number</th>
        </tr>
        <tr>
            <td id="first"></td>
            <td id="last"></td>
            <td id="room"></td>
        </tr>
    </table>
<script>
    $(document).ready(function() {
        var params = [];
        var objects = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < objects.length; i++)
        {
            elements = objects[i].split('=');
            params.push(elements[1]);
        }
        var building = params[0].split("+")[0];
        var floor = params[0].split("+")[1];
        if (params[3] === 'list') {
            $.getJSON("api/students/"+building+"/"+floor+"/", function (data, status, xhr) {
                if (status >= 400) return alert("ERROR : " + xhr.responseText);
                $.each(data.results, function (key, val) {
                    $("#first").append(val.name_first + "<br />");
                    $("#last").append(val.name_last + "<br />");
                    $("#room").append(val.floor_and_room + "<br />");
                });
            });
        }
    });
</script>

</body>
</html>